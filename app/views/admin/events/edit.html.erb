<div class="container-scroller">
<%= render 'shared/header' %>
<div class="container-fluid page-body-wrapper">
  <%= render 'shared/sidebar' %>
 <div class="main-panel" style="height:100%">
  <div class="col-12 grid-margin stretch-card">
    <div class="card">
    <div class="card-body">
        <h4 class="card-title">Create Event</h4>
         <%= render "shared/form_errors", object: @event %>
         <%= render "shared/notice" %>
        <form method="post" action="<%= admin_events_path %>" class="forms-sample" enctype="multipart/form-data">
        <input type='hidden' name="authenticity_token" value="<%= form_authenticity_token %>">
        <input type='hidden' class="price_type" name="price_type" value="free">
        <input type='hidden' id="paid_tickets_count" name="paid_tickets_count" value="0">
        <input type='hidden' id="passes_count" name="passes_count" value="0">
      <div class="form-group">
        <label for="image" class="control-label">Event Image</label>
        <br>
        <input type="file" id="image" name="image">
     </div>
         
        <div class="form-group">
          <label for="name">Event Name</label>
          <input type="text" class="form-control" id="name" name="name" placeholder="Title" value="<%= @event.name %>">
        </div>
        
        <div class="form-group">
          <label for="start_date">Start date</label>
          <input type="text" class="form-control date" id="start_date" name="start_date" placeholder="Start date" data-time-format="H:i" data-step="15" data-min-time="10:00" data-max-time="18:00" data-show-2400="true" value="<%= @event.start_date %>">
       </div>

        <div class="form-group">
          <label for="end_date">End date</label>
          <input type="text" class="form-control date" id="end_date" name="end_date" placeholder="End date" data-time-format="H:i" data-step="15" data-min-time="10:00" data-max-time="18:00" data-show-2400="true value="<%= @event.end_date %>"">
        </div>

     <div class="form-group">
        <label for="email">Start Time</label>
        <input type="text" class="form-control time ui-timepicker-input" id="start_time" name="start_time" placeholder="start_Time" value="<%= @event.start_time %>">
     </div>

     <div class="form-group">
          <label for="email">End Time</label>
          <input type="text" class="form-control time ui-timepicker-input" id="end_time" name="end_time" placeholder="End Time" value="<%= @event.end_time %>">
    </div>

    <div class="form-group">
      <label for="location">Location</label><br>
      <input type="hidden" name="lat" id="lat" value="<%= @event.lat %>">
      <input type="hidden" name="lng" id="lng" value="<%= @event.lng %>">
      <input type="hidden" name="creator_name" value="<%=  get_full_name(current_user) %>">
      <input type="hidden" name="creator_image" value="<%= current_user.avatar %>">
      <span class="error" id="location_error"></span><br>
      <input type="text" class="form-control location" name="location" id="location" placeholder="Location" value="<%= @event.location %>">
 </div>

      <div class="form-group">
      <select class="form-control categories_select select_multi" data-placeholder="Select a category..." multiple class="chosen-select" name="category_ids[]" id="categories_select">
      <% @categories.each do |cat| %>
        <% @event.categories.each do |e_cat| %>
      <option value="<%= cat.id %>" <%= e_cat.id == cat.id ? 'selected' : '' %>><%= cat.name %></option>
      <% end %>
      <% end %>
      </select>
      </div>

      <div class="form-group">
        <label for="description">Description</label>
        <textarea name="description" class="form-control" rows="12"><%= @event.description %></textarea>
      </div>

      <div class="form-group">
        <label for="terms_conditions">Terms and Conditions</label>
        <textarea name="terms_conditions" class="form-control" rows="12"><%= @event.terms_conditions %></textarea>
      </div>

      <div class="form-group">
            <label for="event_forwarding">Event Forwarding</label>
            <input type="checkbox" class="edit_event_checkbox event_forwarding" <%= BoolTocheckBox(@event.event_forwarding) %> >
            <input type="hidden" name='event_forwarding' id="event_forwarding" value="<%= @event.event_forwarding %>">
        </div>

      <div class="form-group">
        <label for="allow_chat">Allow Chat</label>
        <input type="checkbox" class="edit_event_checkbox allow_chat" <%= BoolTocheckBox(@event.allow_chat) %> value="<%= BoolToNumber(@event.allow_chat) %>" >
        <input type="hidden" name='allow_chat' id="allow_chat"  value="<%= @event.allow_chat %>">
    </div>
         
       <div class="form-group">
        <h4>Admission Process </h4>
        <button type="button" class="free_ticket">Free Ticket <i class="fa fa-plus" aria-hidden="true"></i></button>
        <button type="button" class="paid_ticket">Paid Ticket <i class="fa fa-plus" aria-hidden="true"></i></button>
        <button type="button" class="pay_at_door">Pay at the door <i class="fa fa-plus" aria-hidden="true"></i></button>
        <button type="button" class="pass">Passes <i class="fa fa-plus" aria-hidden="true"></i></button>
        <div class="input_section" style="display: none; max-width: 90%;" >
           <% if !@event.tickets.blank? %>
              <% @event.tickets.each do |ticket| %>
                  <% if ticket.ticket_type == 'free' %>
                  <div class="form-group">
                   <label style="margin-right: 30px; " class="free_ticket_input">Ticket Name </label>
                   <input type="text" name="free_ticket[title]" required="" style="margin-right: 30px;" class="">
                   <label style="margin-right: 30px;" class="free_ticket_input">Quantity</label>
                   <input type="number" name="free_ticket[quantity]" required="" style="margin-right: 30px;" class="free_ticket_input input">
                     <label style="margin-right: 30px;" >Max Per Order</label> 
                    <input type="number" name="free_ticket[per_head]" required="" style="margin-right: 30px;" ></div>
                  <% elsif ticket.ticket_type == 'buy' %>
                  <% elsif ticket.ticket_type == 'pay_at_door' %>
                  <% end %>
                <% end %>
           <% end %>
        </div>
       </div><!-- form group -->

          <div class="form-group">
            <label for="sponsor_image">Sponsor Logo</label>
            <input type="file" class="form-control" id="sponsor_image" name="sponsor_image">
        </div>


         <div class="form-group" style="display:none;">
            <label for="password_confirmation">Host</label>
            <input type="text" class="form-control" name="host" id="host" value="<%= get_full_name(current_user) %>">
         </div>
         

        <div class="form-group">
            <label for="external_url">Link External Url</label>
            <input type="text" class="form-control" id="external_url" name="external_url" placeholder="example.com">
        </div>

        <div class="form-group">
            <label for="allow_additional_media">Add Media</label>
            <input type="checkbox" id="allow_additional_media" name="allow_additional_media">
        </div>

         <div class="additional_media_wrapper" style="display: none;">
          <div class="form-group">
            <label for="password_confirmation">Additional Media</label>
            <br>
             <input type="file" name="event_attachments[media][]" multiple id="additional_media">
          </div>
        </div><!--additional media wrapper-->
        <button type="submit" class="btn btn-primary mr-2 event_create_button">Create</button>
        </form>
    </div>
    </div>
</div>
  <%=  render 'shared/footer' %>
 </div><!--main panel-->
</div><!-- page wrapper-->
</div><!--container-->


