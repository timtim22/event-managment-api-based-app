<div class="container-scroller">
<%= render 'shared/header' %>
<div class="container-fluid page-body-wrapper">
  <%= render 'shared/sidebar' %>
 <div class="main-panel">
   <div class="col-lg-12 grid-margin stretch-card">
    <div class="card">
     <div class="card-body">
      <%= render "shared/notice" %>
     <br>
    <h4 class="card-title">Users List</h4>
    <div class="table-responsive">
    <table class="table table-striped">
        <thead>
        <tr>
          <th>User</th>
          <th>Name</th>
          <th>Email</th>
          <th>Date Registered</th>
          <th>Role</th>
          <th>Action</th>
        </tr>
        </thead>
        <tbody>
        <% @users.each do |u| %>
        <tr>
            <td class="py-1"><img src='<%= u.avatar %>" %>'' onError="this.onerror=null;this.src='/assets/avatar.png';" alt="image" class="user_list_img"></td>
            <td><%= get_full_name(u) %></td>
            <td><%= u.email %></td>
            <td><%= time_ago_in_words(u.created_at) %></td>
            <% if !u.roles.blank? %>
            <td><%= u.roles.map {|role| role.title } %></td>
            <% else %>
            <td>No role assigned</td>
            <% end %>
             <td>
            <a href="<%= edit_admin_user_path(u.id) %>" data-toggle="tooltip" title="Edit User"><i class="fa fa-edit"></i></a>
            |
            <%= link_to admin_user_path(u), method: :delete, data: {confirm: 'Are you sure you want to delete?'} do %>
              <i class="fa fa-trash" data-toggle="tooltip" title="Delete User"></i>
              <% end %>
            </td>
        </tr>
        <% end %>
        </tbody>
    </table>
    </div>
</div>
</div>
</div>
  <%=  render 'shared/footer' %>
 </div><!--main panel-->
</div><!-- page wrapper-->
</div><!--container-->